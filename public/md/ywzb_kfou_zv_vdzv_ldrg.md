# 输入转换

## 将输入的10进制数分配给不同字节

```java
$Input(10,range=1-8178,t0=val>>8, t1=val&0xff){2f 67 ea 03 t0 t1};
```
 
上面使用了Input指令：

* 指令内声明了t0和t1两个变量，分别代表两个字节。
* 其中val是用户输入的值，range=1-8178限定了用户的输入范围，这表明val占用了两个字节。
* t0=val>>8和t1=val&0xff，t0被赋予了val的高字节的值，t1被赋予了val的低字节的值。
* 后面的花括号{2f 67 ea 03 t0 t1}表示等用户输入完毕后，将向ECU发送帧数据。这些数据中，有经过赋值的t0和t1.

下面将用inputBox指令和Send指令达到该效果：

```java
$InputBox(10,range=0-8178,f[2][1]=val>>8,f[2][2]=val&0xff);
"确定"L1;
"退出"L_EXIT;

$Lab(L1)
$Send(){2f 67 ea 03 f[2][1] f[2][2]};

$Lab(L_EXIT)
$EXIT();

```

以下是解释:
* 指令内val是用户输入的值，range=1-8178限定了用户的输入范围，这表明val占用了两个字节。
* f[2][1]=val>>8和f[2][2]=val&0xff，f[2][1]被赋予了val的高字节的值，f[2][2]被赋予了val的低字节的值。
* 用户点击确定后，跳转到了L1, 标签L1下，是一条Send指令，其中Send发送了花括号里面的字节，包括经过赋值的f[2][1]和f[2][2]。


## 输入转ASCII之自适应用户输入长度

```java
$F(2,100,32);
$Display(){"请输入不大于8位的车辆名称"}
$InputBox(0a,f[1]);
"确认"L2;

$Lab(L2);
$if(f[1][0]:2);
$Send(){2e f1 12 f[1][1]1 f[2][1]5};
$Elseif(f[1][0]:3);
$Send(){2e f1 12 f[1][1]2 f[2][1]4};
$Elseif(f[1][0]:4);
$Send(){2e f1 12 f[1][1]3 f[2][1]3};
$Elseif(f[1][0]:5);
$Send(){2e f1 12 f[1][1]4 f[2][1]2};
$Elseif(f[1][0]:6);
$Send(){2e f1 12 f[1][1]5 f[2][1]1};
$Elseif(f[1][0]:7);
$Send(){2e f1 12 f[1][1]6 f[2][1]};
$Elseif(f[1][0]:8);
$Send(){2e f1 12 f[1][1]7};
$Else();
$Display(enter){"你输入的不在规定范围内"};
$Endif();
```


* inputBox将用户输入的字符转为ASCII，然后传入f[1]。
* f[1]内的元素被重新赋值。其中，f[1][0]被赋值为用户输入的长度。
* 利用f[1][0]可以判断用户输入了多少个字符，从而用空白符(ASCII为32)占满剩余的字节。

`$F(2,100,32);`是一条赋值指令，它表示将f[2]内，第二个元素开始往后一百个元素统一赋值为32。也就是将f[2][1]至f[2][100]赋值为32。

## 将输入的值用calc进行复杂运算

```java
$InputBox(10,range=0-655.35,m[0]);
"确认"L2;

$Lab(L2);
$Calc(){f[3][1]=m[0]*100>>8}
$Calc(){f[3][2]=m[0]*100&0xff}
$Send(){31 01 c0 f[3][1] f[3][2]}
```

若用户输入的值需要经过复杂的运算，则应使用中转数组`m`的某一个元素来预先保存用户输入的值，然后再用calc将该值进行各种转换。
* InputBox将用户输入的值赋值给m[0]。
* 使用Calc将m[0]分配给f[3][1]和f[3][2]。这里，f[3][1]代表高字节，f[3][2]代表低字节。
* 向ECU发送转换后的数据。