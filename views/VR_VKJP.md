# VR语言简介

 `VR` 语言实际上是一堆功能块指令，为我的工作而生，使用起来有点像用函数一样。它可以帮助用户对目标文本内容进行各种处理，然后返回处理后文本内容。它辅助你做以下工作:

>* 添加sysData数据
>* 对某些语言的语法进行检查
>* 对比设备和新增资料中的数据流项目
>* 对报文进行分析
>* 对文件进行操作

格式 ：所有的功能指令的格式均为 `操作符 +“=”+ 参数 + 两对花括号` 组成 如

```js
//该功能指令返回一个彭语言的菜单指令代码，菜单名为“数据流”。
1=数据流{{}}
```
-------------
VR 指令大全
==============
菜单指令
==============
* 操作符:`MENU`或`1`:

* 描述:菜单指令：操作符为1或者menu(大小写不敏感)，参数为菜单的名字，支持主流菜单名的拼音写法(shujuliubanbenxinxi等(拼错自动矫正))

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
1=菜单1{{
menu=菜单2{{
//调用其他指令
}}
}}

```

---------------
未支持
==============
* 操作符:`2`或`DATA`:

* 描述:该功能未做..浏览Pengdata数据,可搜索和提取指定数据
* 返回类型:该指令不返回文本.
* 示例:
```js

```

---------------
电池单体查找
==============
* 操作符:`4`或`CELLFIND`:

* 描述:参数:9=utf8表示依据utf8编码读取报文;内容:可直接输入报文进行分析.但在路径读取模式下则输入报文路径以读取该路径下的内容,然后对其进行分析.
* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
CELLFIND=9=utf8{{
//path
}}
```

---------------
读故障码指令
==============
* 操作符:`3`或`RDTC`:

* 描述:读故障码指令:操作符为3或rdtc。内容格式仅能如下:state=XXX frame=XXX code=XXX space=XXX start=XXX id=XXX num(number)=XXX

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
3={{
space=4
code=2
}}

```

---------------
版本信息指令
==============
* 操作符:`8`或`ECU`:

* 描述:版本信息指令：操作符为8或者ecu(大小写不敏感)，如果参数为0时则自动将空的帧填上99 99 99.有关版本信息项目编写规范请参考"VR语言之数据流项目编写示例"

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
8=0{{
3f项目示例{2222}33，，’00：元素‘，’oth：--‘
3f项目示例{}33，，元素1 02:元素2 元素3
}}

```

---------------
数据流指令
==============
* 操作符:`9`或`STR`:

* 描述:数据流指令：操作符为9或者STR(大小写不敏感)，参数为彭语言中str()的参数，如果参数为0时则自动将空的帧填上99 99 99.有关数据流项目编写规范请参考"VR语言之数据流项目编写示例"

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
STR=sortCanDataByID{{
3f项目示例{2222}33，，’00：元素‘，’oth：--‘
3f项目示例{2223}33，，元素1 02:元素2 元素3
}}
9=0{{
3f项目示例{}33，，’00：元素‘，’oth：--‘
3f项目示例{}33，，元素1 02:元素2 元素3
}}

```

---------------
3f数组参数格式化
==============
* 操作符:`33`或`ARRAY`:

* 描述:3f数组参数格式化:操作符为33。不指定范围参数将自动分配范围参数

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
33={{
00：元素0
02-09：元素2
元素3
10
}}

```

---------------
指定内容向彭语言格式化
==============
* 操作符:`58`或`SELECT`:

* 描述:指定文本中的VR指令或彭指令中含有的VR语言向彭语言格式化:操作符为58。参数可填str或9、ecu或8、rdtc或3、menu或1，多个参数用逗号或空格隔开，参数大小写不敏感

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
58=str ecu{{
+1[版本信息](Spec)
$Ecu();
*"硬件版本",                   {22 F1 A3},cf,d4*(1)+(0),.0,;// =4
*"硬件日期",                   {22 F1 A3}88 8年9月
***
$$$
}}

```

---------------
大括号对齐
==============
* 操作符:`77`或`ALIGN`:

* 描述:大括号对齐:操作符为77。

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
77={{
AB{}
DG  {}
, ,{}
}}

```

---------------
（该指令暂未支持）传输轴范围锁定
==============
* 操作符:`47`:

* 描述:（该指令暂未支持）传输轴范围锁定:操作符为47。参数为line和weight。line只能是0或1,0表示传输轴: 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7;1表示传输轴:7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 ;weight只能是0或1,0表示前一个data权重更高;1表示后一个data权重更高。里面的内容格式示例:d4=0-3,d5=7,‘=’后面是占用位表达，这里一共5位.(注意：所有字节内部的位的权重永远是从左到右由高到低的.与传输轴的传输方式无关.)

* 返回类型:该指令不返回文本.
* 示例:
```js
47=line=1,weight=1{{
d4=0-3,d5=7
}}

```

---------------
该指令已弃
==============
* 操作符:`69`:

* 描述:该指令已弃
* 返回类型:该指令不返回文本.
* 示例:
```js

```

---------------
调用对比助手
==============
* 操作符:`99`或`COMPARE`:

* 描述:调用对比助手:操作符为99。

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
99={{
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
}}
//参数为32表示将会设置d4往后的值以30-39的规律循环赋值（但d4为2f），然后输出对应值（该效果仅对计算类型项目有效）。
99=32{{
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
}}
//以下参数表示：字节d4设置为0xff 字节d5设置为0x01 时输出对应值； 字节d4设置为0x80时，输出对应值（输出对应值仅对计算类型项目有效）
99=[4=0xff 5=0x1][4=0x80]{{
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
}}
//下面参数表示设置每条算式最高字节分别为0x10、0xff，输出对应值（输出对应值仅对计算类型项目有效）
99=9=0x10 0xff{{
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
}}
//下面参数表示设置每条算式最高字节为开发者预设值，输出对应值（输出对应值仅对计算类型项目有效）
99=9{{
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
}}

```

---------------
调用sysData检查助手
==============
* 操作符:`90`或`CHECK`:

* 描述:调用sysData检查助手:操作符为90。参数名为9表示输入内容为路径，将根据路径检查该路径对应的文件内容，不写参数默认检查输入的内容。

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
90={{
$Str()
*"变道盲区按键次数",   {22 b0 01},cf,d4*16777216+d5*65536+d6*256+d7,.0,次;
*"车道偏离按键次数",   {22 b0 01},cf,d8*16777216+d9*65536+d10*256+d11,.0,次;
***
}}
90=9=GB2312{{
D:WRVRworking汉EVZCZC1.JAVA
}}

```

---------------
相似项目替换目标项目名
==============
* 操作符:`10`:

* 描述:相似项目替换目标项目名:操作符为10。该功能用于执行匹配相似项目脚本后输出的文本中的替换动作

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
10={{
左前车窗当前动作状态 相似度 : 0.824 *"左前窗当前动作状态",                {22 00 04},3f,d4,'00:默认值','01:停止','02:车窗打开','03:车窗关闭','oth:未定义';
左前车窗自动下降开关信号 相似度 : 0.800 *"左前自动下降开关信号",              {22 00 08},3f,d4,'00:打开','01:关闭','oth:无效数据';
}}

```

---------------
翻译数据格式化
==============
* 操作符:`98`或`FIX`:

* 描述:翻译数据格式化:98或fix。参数：9=UTF8表示以UTF8编码读取指定路径，默认UTF8。
* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
//根据默认编码读取目标路径进行检查修改
98=9{{
D:/Documents/WXWork/1688855185231552/Cache/File/2022-11/测试文件.TXT
}}
//可以直接写入目标内容进行检查修改
98={{
"Str2ID(0300014300010001000000E8)，Rated voltage
Battery production date; "
}}


```

---------------
未支持
==============
* 操作符:`30`或`FINDMENU`:

* 描述:该功能未做..根据系统序号在menuData中找出菜单进入路径
* 返回类型:该指令不返回文本.
* 示例:
```js

```

---------------
帧id格式化
==============
* 操作符:`19`或`FRAME`:

* 描述:帧id格式化:操作符为19。输入的内容格式仅能如下:空白符和逗号作为id分隔符。“-”为连续递增标识符

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
19={{
220101 - 22010A 220106
220110
22011A,22011C
}}

```

---------------
输出VR相关文档
==============
* 操作符:`RJOK`:

* 描述:输出VR相关文档:nixb=AFOA_WU:表示返回所有功能名,nixb=afoa_lzm_wu:表示返回所有功能别名,nixb=sopc:表示返回所有文档信息.类似的还有"csrf, klch"
VR所有文档已设立独立的窗口供用户直接查看.

* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
RJOK=nixb=AFOA_WU{{
}}

```

---------------
单体排序指令
==============
* 操作符:`97`或`CELLSORT`:

* 描述:单体排序指令:97或cellsort。参数格式如下:2=1-1(表示每帧第一个字节到第一个字节为标识字节),9=GB2312(表示将输入内容视为文件路径，按GB2312编码读取文件。如果不写此参数则将输入内容视为目标内容)。
* 返回类型:该指令将返回处理后的文本内容或报告.
* 示例:
```js
97=2=1-1,9=GB2312{{
D:Chezhongzhi中值3报文2温度数据摘取.TXT
}}

```
